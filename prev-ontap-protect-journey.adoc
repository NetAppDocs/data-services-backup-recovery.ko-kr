---
sidebar: sidebar 
permalink: prev-ontap-protect-journey.html 
keywords: backing up, back up, backup, backup application data, Amazon Web services, AWS, NetApp Backup and Recovery, Oracle database, Microsoft SQL Server database, SAP HANA database 
summary: NetApp NetApp Backup and Recovery 사용하여 VMware 워크로드를 보호하세요. 
---
= NetApp Backup and Recovery 통해 보호 여정을 계획하세요
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Backup and Recovery 사용하면 소스 볼륨의 복사본을 최대 3개까지 만들어 데이터를 보호할 수 있습니다.  볼륨에서 백업 및 복구를 활성화할 때 선택할 수 있는 옵션이 많으므로 준비할 수 있도록 선택 사항을 검토해야 합니다.


NOTE: NetApp Backup and Recovery 워크로드로 전환하려면 다음을 참조하세요.link:br-start-switch-ui.html["다양한 NetApp Backup and Recovery 워크로드로 전환"] .

다음 옵션을 살펴보겠습니다.

* 어떤 보호 기능을 사용하시겠습니까? 스냅샷 복사본, 복제 볼륨 및/또는 클라우드 백업
* 어떤 백업 아키텍처를 사용하시겠습니까? 볼륨의 캐스케이드 백업 또는 팬아웃 백업
* 기본 백업 정책을 사용할 것인가, 아니면 사용자 지정 정책을 만들어야 합니까?
* 서비스에서 클라우드 버킷을 생성해 주길 원하시나요, 아니면 작업을 시작하기 전에 개체 스토리지 컨테이너를 만들어 주길 원하시나요?
* 어떤 콘솔 에이전트 배포 모드를 사용하고 있습니까(표준, 제한 또는 개인 모드)?




== 어떤 보호 기능을 사용하시겠습니까?

사용할 기능을 선택하기 전에 각 기능의 기능과 제공되는 보호 유형에 대한 간단한 설명을 확인해 보세요.

[cols="20,70"]
|===
| 백업 유형 | 설명 


| 스냅샷 | 소스 볼륨 내의 볼륨에 대한 읽기 전용, 특정 시점 이미지를 스냅샷 복사본으로 생성합니다.  스냅샷 복사본을 사용하여 개별 파일을 복구하거나 볼륨의 전체 내용을 복원할 수 있습니다. 


| 복제 | 다른 ONTAP 스토리지 시스템에 데이터의 보조 사본을 만들고 보조 데이터를 지속적으로 업데이트합니다.  귀하의 데이터는 최신 상태로 유지되며 필요할 때마다 사용할 수 있습니다. 


| 클라우드 백업 | 보호 및 장기 보관 목적으로 데이터를 클라우드에 백업합니다.  필요한 경우 백업에서 볼륨, 폴더 또는 개별 파일을 동일하거나 다른 시스템으로 복원할 수 있습니다. 
|===
스냅샷은 모든 백업 방법의 기반이며, 백업 및 복구 서비스를 사용하려면 필수입니다.  스냅샷 복사본은 볼륨의 읽기 전용 특정 시점 이미지입니다.  이미지는 최소한의 저장 공간을 사용하고 마지막 스냅샷 복사본이 만들어진 이후 파일의 변경 사항만 기록하므로 성능 오버헤드가 무시할 수 있을 정도입니다.  볼륨에 생성된 스냅샷 복사본은 복제된 볼륨과 백업 파일을 소스 볼륨의 변경 사항과 동기화하는 데 사용됩니다(그림 참조).

image:diagram-321-overview.png["백업 파일이 소스 시스템에 스냅샷 복사본으로, 보조 스토리지 시스템에 복제된 볼륨으로, 개체 스토리지에 백업 파일로 존재하는 방식을 보여주는 다이어그램입니다."]

다른 ONTAP 스토리지 시스템에 복제된 볼륨을 생성하고 클라우드에 백업 파일을 생성할 수 있습니다.  아니면 복제된 볼륨이나 백업 파일만 만들 수도 있습니다. 선택은 사용자에게 달려 있습니다.

요약하자면, ONTAP 시스템의 볼륨에 대해 생성할 수 있는 유효한 보호 흐름은 다음과 같습니다.

* 소스 볼륨 -> 스냅샷 복사본 -> 복제된 볼륨 -> 백업 파일
* 소스 볼륨 -> 스냅샷 복사본 -> 백업 파일
* 소스 볼륨 -> 스냅샷 복사본 -> 복제된 볼륨



NOTE: 복제된 볼륨이나 백업 파일을 처음 만들 때는 소스 데이터의 전체 사본이 포함됩니다. 이를 _기준선 전송_이라고 합니다.  이후 전송에는 소스 데이터의 차등 사본(스냅샷)만 포함됩니다.

*다양한 백업 방법 비교*

다음 표는 세 가지 백업 방법을 일반적으로 비교한 것입니다.  일반적으로 개체 스토리지 공간은 온프레미스 디스크 스토리지보다 비용이 저렴하지만, 클라우드에서 데이터를 자주 복원할 것으로 생각된다면 클라우드 공급업체의 이탈 수수료로 인해 절감액이 일부 줄어들 수 있습니다.  클라우드에 있는 백업 파일에서 데이터를 얼마나 자주 복원해야 하는지 파악해야 합니다.

이러한 기준 외에도 클라우드 스토리지는 DataLock 및 랜섬웨어 복원력 기능을 사용하면 추가적인 보안 옵션을 제공하고, 오래된 백업 파일에 대한 보관 스토리지 클래스를 선택하면 추가적으로 비용을 절감할 수 있습니다. link:prev-ontap-policy-object-options.html["DataLock 및 랜섬웨어 보호와 보관 스토리지 설정에 대해 자세히 알아보세요."].

[cols="18,18,22,18,22"]
|===
| 백업 유형 | 백업 속도 | 백업 비용 | 속도 복원 | 복구 비용 


| *스냅 사진* | 높은 | 낮음(디스크 공간) | 높은 | 낮은 


| *복제* | 중간 | 중간(디스크 공간) | 중간 | 중간(네트워크) 


| *클라우드 백업* | 낮은 | 낮음(객체 공간) | 낮은 | 높음 (공급자 수수료) 
|===


== 어떤 백업 아키텍처를 사용하시겠습니까?

복제된 볼륨과 백업 파일을 모두 생성할 때 볼륨을 백업하기 위해 팬아웃 또는 캐스케이드 아키텍처를 선택할 수 있습니다.

*팬아웃* 아키텍처는 스냅샷 복사본을 대상 스토리지 시스템과 클라우드의 백업 개체 모두에 독립적으로 전송합니다.

image:diagram-321-fanout-detailed.png["볼륨의 스냅샷 복사본을 사용하여 복제된 볼륨과 백업 파일을 만들고 업데이트하는 방법을 보여주는 다이어그램입니다."]

*캐스케이드* 아키텍처는 스냅샷 복사본을 먼저 대상 스토리지 시스템으로 전송한 다음, 해당 시스템이 복사본을 클라우드의 백업 개체로 전송합니다.

image:diagram-321-cascade-detailed.png["볼륨의 스냅샷 복사본을 사용하여 복제된 볼륨과 백업 파일을 만들고 업데이트하는 방법을 보여주는 다이어그램입니다."]

*다양한 아키텍처 선택 비교*

이 표는 팬아웃과 캐스케이드 아키텍처를 비교한 것입니다.

[cols="50,50"]
|===
| 팬아웃 | 종속 


| 스냅샷 복사본을 2개의 서로 다른 시스템으로 보내기 때문에 소스 시스템에 미치는 성능 영향이 적습니다. | 스냅샷 복사본을 한 번만 전송하므로 소스 스토리지 시스템의 성능에 미치는 영향이 적습니다. 


| 모든 정책, 네트워킹 및 ONTAP 구성이 소스 시스템에서 수행되므로 설정이 더 쉽습니다. | 보조 시스템에서도 일부 네트워킹 및 ONTAP 구성이 필요합니다. 
|===


== 스냅샷, 복제 및 백업에 기본 정책을 사용하시겠습니까?

NetApp 에서 제공하는 기본 정책을 사용하여 백업을 만들 수도 있고, 사용자 정의 정책을 만들 수도 있습니다.  활성화 마법사를 사용하여 볼륨의 백업 및 복구 서비스를 활성화하면 기본 정책과 시스템(Cloud Volumes ONTAP 또는 온프레미스 ONTAP 시스템)에 이미 있는 다른 정책 중에서 선택할 수 있습니다.  기존 정책과 다른 정책을 사용하려면 활성화 마법사를 시작하기 전이나 사용하는 동안 정책을 만들 수 있습니다.

* 기본 스냅샷 정책은 매시간, 매일, 매주 스냅샷 복사본을 생성하고, 매시간 6개, 매일 2개, 매주 2개의 스냅샷 복사본을 보관합니다.
* 기본 복제 정책은 일일 및 주간 스냅샷 복사본을 복제하여 일일 7개와 주간 52개의 스냅샷 복사본을 보관합니다.
* 기본 백업 정책은 일일 및 주간 스냅샷 복사본을 복제하여 일일 7개와 주간 52개의 스냅샷 복사본을 보관합니다.


복제 또는 백업에 대한 사용자 지정 정책을 생성하는 경우 정책 레이블(예: "매일" 또는 "매주")이 스냅샷 정책이나 복제된 볼륨에 있는 레이블과 일치해야 하며 백업 파일이 생성되지 않습니다.

NetApp Backup and Recovery UI에서 개체 스토리지 정책에 대한 스냅샷, 복제 및 백업을 생성할 수 있습니다.  섹션을 참조하세요link:prev-ontap-backup-manage.html["새로운 백업 정책 추가"] 자세한 내용은.

NetApp Backup and Recovery 사용하여 사용자 정의 정책을 만드는 것 외에도 System Manager나 ONTAP 명령줄 인터페이스(CLI)를 사용할 수 있습니다.

* https://docs.netapp.com/us-en/ontap/task_dp_configure_snapshot.html["System Manager 또는 ONTAP CLI를 사용하여 스냅샷 정책을 만듭니다."^]
* https://docs.netapp.com/us-en/ontap/task_dp_create_custom_data_protection_policies.html["System Manager 또는 ONTAP CLI를 사용하여 복제 정책을 만듭니다."^]


*참고:* 시스템 관리자를 사용하는 경우 복제 정책의 정책 유형으로 *비동기*를 선택하고, 개체 백업 정책의 경우 *비동기* 및 *클라우드에 백업*을 선택합니다.

사용자 지정 정책을 만드는 경우 도움이 될 수 있는 몇 가지 ONTAP CLI 명령 샘플을 소개합니다.  _admin_ vserver(저장소 VM)를 사용해야 한다는 점에 유의하세요. `<vserver_name>` 이러한 명령에서.

[cols="30,70"]
|===
| 정책 설명 | 명령 


| 간단한 스냅샷 정책 | `snapshot policy create -policy WeeklySnapshotPolicy -enabled true -schedule1 weekly -count1 10 -vserver ClusterA -snapmirror-label1 weekly` 


| 클라우드로의 간단한 백업 | `snapmirror policy create -policy <policy_name> -transfer-priority normal -vserver <vserver_name> -create-snapshot-on-source false -type vault`
`snapmirror policy add-rule -policy <policy_name> -vserver <vserver_name> -snapmirror-label <snapmirror_label> -keep` 


| DataLock 및 랜섬웨어 보호 기능을 갖춘 클라우드 백업 | `snapmirror policy create -policy CloudBackupService-Enterprise -snapshot-lock-mode enterprise -vserver <vserver_name>`
`snapmirror policy add-rule -policy CloudBackupService-Enterprise -retention-period 30days` 


| 보관 스토리지 클래스를 사용한 클라우드 백업 | `snapmirror policy create -vserver <vserver_name> -policy <policy_name> -archive-after-days <days> -create-snapshot-on-source false -type vault`
`snapmirror policy add-rule -policy <policy_name> -vserver <vserver_name> -snapmirror-label <snapmirror_label> -keep` 


| 다른 스토리지 시스템으로의 간단한 복제 | `snapmirror policy create -policy <policy_name> -type async-mirror -vserver <vserver_name>`
`snapmirror policy add-rule -policy <policy_name> -vserver <vserver_name> -snapmirror-label <snapmirror_label> -keep` 
|===

NOTE: 클라우드 관계에 대한 백업에는 볼트 정책만 사용할 수 있습니다.



== 내 보험은 어디에 있나요?

백업 정책은 사용하려는 백업 아키텍처(팬아웃 또는 캐스케이딩)에 따라 다른 위치에 있습니다.  복제 정책과 백업 정책은 동일한 방식으로 설계되지 않았습니다. 복제는 두 개의 ONTAP 스토리지 시스템을 쌍으로 구성하고 개체에 대한 백업은 스토리지 공급자를 대상으로 사용하기 때문입니다.

* 스냅샷 정책은 항상 기본 스토리지 시스템에 있습니다.
* 복제 정책은 항상 보조 스토리지 시스템에 있습니다.
* 개체 백업 정책은 소스 볼륨이 있는 시스템에서 생성됩니다. 이는 팬아웃 구성의 기본 클러스터이고, 계단식 구성의 보조 클러스터입니다.


이러한 차이점은 표에 나와 있습니다.

[cols="25,25,25,25"]
|===
| 아키텍처 | 스냅샷 정책 | 복제 정책 | 백업 정책 


| *팬아웃* | 주요한 | 반성 | 주요한 


| *종속* | 주요한 | 반성 | 반성 
|===
따라서 계단식 아키텍처를 사용할 때 사용자 지정 정책을 만들 계획이라면 복제 볼륨이 생성될 보조 시스템에서 복제 및 개체 정책에 대한 백업을 만들어야 합니다.  팬아웃 아키텍처를 사용할 때 사용자 지정 정책을 만들 계획이라면 복제 볼륨이 생성될 보조 시스템에서 복제 정책을 만들고 기본 시스템에서 개체 정책으로 백업을 만들어야 합니다.

모든 ONTAP 시스템에 존재하는 기본 정책을 사용한다면 아무런 문제가 없습니다.



== 자체 객체 스토리지 컨테이너를 만들고 싶습니까?

시스템의 개체 스토리지에 백업 파일을 만들면 기본적으로 백업 및 복구 서비스는 사용자가 구성한 개체 스토리지 계정에 백업 파일에 대한 컨테이너(버킷 또는 스토리지 계정)를 만듭니다.  AWS 또는 GCP 버킷의 이름은 기본적으로 "netapp-backup-<uuid>"로 지정됩니다.  Azure Blob 저장소 계정의 이름은 "netappbackup<uuid>"입니다.

특정 접두사를 사용하거나 특수 속성을 지정하려면 개체 공급자 계정에서 직접 컨테이너를 만들 수 있습니다.  자체 컨테이너를 만들려면 활성화 마법사를 시작하기 전에 컨테이너를 만들어야 합니다.  NetApp Backup and Recovery 모든 버킷을 사용하고 버킷을 공유할 수 있습니다.  백업 활성화 마법사는 선택한 계정과 자격 증명에 대해 프로비저닝된 컨테이너를 자동으로 검색하므로 사용할 컨테이너를 선택할 수 있습니다.

콘솔이나 클라우드 공급자를 통해 버킷을 만들 수 있습니다.

* https://docs.netapp.com/us-en/storage-management-s3-storage/task-add-s3-bucket.html["콘솔에서 Amazon S3 버킷 만들기"^]
* https://docs.netapp.com/us-en/storage-management-blob-storage/task-add-blob-storage.html["콘솔에서 Azure Blob 저장소 계정 만들기"^]
* https://docs.netapp.com/us-en/storage-management-google-cloud-storage/task-add-gcp-bucket.html["콘솔에서 Google Cloud Storage 버킷 만들기"^]


"netapp-backup-xxxxxx"가 아닌 다른 버킷 접두사를 사용하려는 경우 콘솔 에이전트 IAM 역할에 대한 S3 권한을 수정해야 합니다.

*고급 버킷 설정*

이전 백업 파일을 보관 저장소로 이동하거나 DataLock 및 랜섬웨어 보호 기능을 활성화하여 백업 파일을 잠그고 랜섬웨어가 있는지 검사하려는 경우 특정 구성 설정을 사용하여 컨테이너를 만들어야 합니다.

* 현재 클러스터에서 ONTAP 9.10.1 이상의 소프트웨어를 사용하는 경우 AWS S3 스토리지에서 자체 버킷의 보관 스토리지가 지원됩니다.  기본적으로 백업은 S3 _Standard_ 스토리지 클래스에서 시작됩니다.  적절한 수명 주기 규칙으로 버킷을 생성했는지 확인하세요.
+
** 30일 후에 버킷 전체 범위의 객체를 S3 _Standard-IA_로 이동합니다.
** "smc_push_to_archive: true" 태그가 있는 객체를 _Glacier Flexible Retrieval_(이전 S3 Glacier)로 이동합니다.


* 클러스터에서 ONTAP 9.11.1 이상 소프트웨어를 사용하는 경우 AWS 스토리지에서 DataLock 및 랜섬웨어 보호가 지원되고, ONTAP 9.12.1 이상 소프트웨어를 사용하는 경우 Azure 스토리지에서 DataLock 및 랜섬웨어 보호가 지원됩니다.
+
** AWS의 경우 30일 보존 기간을 사용하여 버킷에서 개체 잠금을 활성화해야 합니다.
** Azure의 경우 버전 수준 불변성 지원이 포함된 저장소 클래스를 만들어야 합니다.






== 어떤 콘솔 에이전트 배포 모드를 사용하고 있습니까?

이미 콘솔을 사용하여 저장소를 관리하고 있다면 콘솔 에이전트가 이미 설치되어 있습니다.  NetApp Backup and Recovery 와 동일한 콘솔 에이전트를 사용할 계획이라면 준비가 완료된 것입니다.  다른 콘솔 에이전트를 사용해야 하는 경우 백업 및 복구 구현을 시작하기 전에 해당 에이전트를 설치해야 합니다.

NetApp Console 비즈니스 및 보안 요구 사항을 충족하는 방식으로 콘솔을 사용할 수 있도록 다양한 배포 모드를 제공합니다.  _표준 모드_는 콘솔 SaaS 계층을 활용하여 모든 기능을 제공하는 반면, _제한 모드_와 _개인 모드_는 연결 제한이 있는 조직에서 사용할 수 있습니다.

https://docs.netapp.com/us-en/console-setup-admin/concept-modes.html["NetApp Console 배포 모드에 대해 자세히 알아보세요"^].



=== 인터넷 연결이 완벽하게 가능한 사이트 지원

NetApp Backup and Recovery 완전한 인터넷 연결(표준 모드 또는 SaaS 모드라고도 함)이 있는 사이트에서 사용하는 경우 콘솔에서 관리하는 모든 온프레미스 ONTAP 또는 Cloud Volumes ONTAP 시스템에 복제된 볼륨을 만들 수 있으며, 지원되는 모든 클라우드 공급자의 개체 스토리지에 백업 파일을 만들 수 있습니다. link:concept-backup-to-cloud.html["지원되는 백업 대상의 전체 목록을 확인하세요."].

유효한 콘솔 에이전트 위치 목록을 보려면 백업 파일을 만들려는 클라우드 공급자의 다음 백업 절차 중 하나를 참조하세요.  콘솔 에이전트를 Linux 시스템에 수동으로 설치하거나 특정 클라우드 공급자에 배포해야 하는 몇 가지 제한 사항이 있습니다.

* link:prev-ontap-backup-cvo-aws.html["Cloud Volumes ONTAP 데이터를 Amazon S3에 백업합니다."]
* link:prev-ontap-backup-cvo-azure.html["Cloud Volumes ONTAP 데이터를 Azure Blob에 백업"]
* link:prev-ontap-backup-cvo-gcp.html["Cloud Volumes ONTAP 데이터를 Google Cloud에 백업"]
* link:prev-ontap-backup-onprem-aws.html["온프레미스 ONTAP 데이터를 Amazon S3에 백업"]
* link:prev-ontap-backup-onprem-azure.html["온-프레미스 ONTAP 데이터를 Azure Blob에 백업"]
* link:prev-ontap-backup-onprem-gcp.html["온프레미스 ONTAP 데이터를 Google Cloud에 백업"]
* link:prev-ontap-backup-onprem-storagegrid.html["온프레미스 ONTAP 데이터를 StorageGRID 에 백업"]
* link:prev-ontap-backup-onprem-ontaps3.html["온프레미스 ONTAP ONTAP S3로 백업"]




=== 인터넷 연결이 제한된 사이트 지원

NetApp Backup and Recovery 인터넷 연결이 제한된 사이트(제한 모드라고도 함)에서 볼륨 데이터를 백업하는 데 사용할 수 있습니다.  이 경우 대상 클라우드 지역에 콘솔 에이전트를 배포해야 합니다.

ifdef::aws[]

* AWS 상업 지역에 설치된 온프레미스 ONTAP 시스템이나 Cloud Volumes ONTAP 시스템의 데이터를 Amazon S3에 백업할 수 있습니다. link:prev-ontap-backup-cvo-aws.html["Cloud Volumes ONTAP 데이터를 Amazon S3에 백업합니다."].


endif::aws[]

ifdef::azure[]

* Azure 상용 지역에 설치된 온-프레미스 ONTAP 시스템 또는 Cloud Volumes ONTAP 시스템의 데이터를 Azure Blob에 백업할 수 있습니다. link:prev-ontap-backup-cvo-azure.html["Cloud Volumes ONTAP 데이터를 Azure Blob에 백업"].


endif::azure[]



=== 인터넷 연결이 없는 사이트 지원

NetApp Backup and Recovery 인터넷 연결이 없는 사이트(_개인 모드_ 또는 _다크_ 사이트라고도 함)에서 볼륨 데이터를 백업하는 데 사용할 수 있습니다.  이 경우, 동일한 사이트의 Linux 호스트에 콘솔 에이전트를 배포해야 합니다.


NOTE: BlueXP 개인 모드(레거시 BlueXP 인터페이스)는 일반적으로 인터넷 연결이 없고 AWS Secret Cloud, AWS Top Secret Cloud, Azure IL6를 포함하는 보안 클라우드 지역이 있는 온프레미스 환경에서 사용됩니다. NetApp 기존 BlueXP 인터페이스를 통해 이러한 환경을 계속 지원합니다. 레거시 BlueXP 인터페이스의 개인 모드 설명서는 다음을 참조하세요. https://docs.netapp.com/us-en/console-setup-admin/media/BlueXP-Private-Mode-legacy-interface.pdf["BlueXP 개인 모드에 대한 PDF 문서"] .

* 로컬 온프레미스 ONTAP 시스템의 데이터를 로컬 NetApp StorageGRID 시스템으로 백업할 수 있습니다. link:prev-ontap-backup-onprem-storagegrid.html["온프레미스 ONTAP 데이터를 StorageGRID 에 백업"].
* 로컬 온프레미스 ONTAP 시스템의 데이터를 S3 개체 스토리지에 대해 구성된 로컬 온프레미스 ONTAP 시스템이나 Cloud Volumes ONTAP 시스템으로 백업할 수 있습니다. link:prev-ontap-backup-onprem-ontaps3.html["온프레미스 ONTAP 데이터를 ONTAP S3에 백업"] . ifdef::aws[]


endif::aws[]

ifdef::azure[]

endif::azure[]
