---
sidebar: sidebar 
permalink: prev-ontap-backup-cvo-gcp.html 
keywords: backing up, back up, backup, backup application data, Amazon Web services, AWS, NetApp Backup and Recovery, Oracle database, Microsoft SQL Server database, SAP HANA database 
summary: NetApp NetApp Backup and Recovery를 사용하여 VMware 워크로드를 보호하세요. 
---
= NetApp Backup and Recovery를 사용하여 Cloud Volumes ONTAP 데이터를 Google Cloud Storage에 백업하세요.
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp 백업 및 복구에서 몇 가지 단계를 완료하여 Cloud Volumes ONTAP 시스템에서 Google Cloud Storage로 볼륨 데이터를 백업하세요.

[]
====
*참고* NetApp 백업 및 복구 워크로드로 전환하려면 다음을 참조하세요.link:br-start-switch-ui.html["다양한 NetApp 백업 및 복구 워크로드로 전환"] .

====


== 구성에 대한 지원을 확인하세요

Google Cloud Storage에 볼륨을 백업하기 전에 지원되는 구성이 있는지 확인하려면 다음 요구 사항을 읽어보세요.

다음 이미지는 각 구성 요소와 구성 요소 간에 준비해야 할 연결을 보여줍니다.

선택적으로, 공용 또는 개인 연결을 사용하여 복제된 볼륨의 보조 ONTAP 시스템에 연결할 수도 있습니다.

image:diagram_cloud_backup_cvo_google.png["NetApp Backup and Recovery가 백업 파일이 있는 소스 시스템의 볼륨과 대상 스토리지와 통신하는 방식을 보여주는 다이어그램입니다."]

지원되는 ONTAP 버전:: 최소 ONTAP 9.8; ONTAP 9.8P13 이상을 권장합니다.
지원되는 GCP 지역:: NetApp 백업 및 복구는 모든 GCP 지역에서 지원됩니다.
GCP 서비스 계정:: Google Cloud 프로젝트에 사용자 지정 역할이 있는 서비스 계정이 있어야 합니다. https://docs.netapp.com/us-en/storage-management-cloud-volumes-ontap/task-creating-gcp-service-account.html["서비스 계정을 만드는 방법을 알아보세요"^] .



NOTE: NetApp Backup and Recovery가 Google Cloud Storage 버킷에 액세스할 수 있도록 하는 서비스 계정에는 더 이상 스토리지 관리자 역할이 필요하지 않습니다.



== 라이센스 요구 사항 확인

NetApp Backup and Recovery PAYGO 라이선스의 경우, Google Marketplace에서 콘솔 구독을 이용할 수 있으며, 이를 통해 Cloud Volumes ONTAP 과 NetApp Backup and Recovery를 배포할 수 있습니다.  당신은 필요합니다 https://console.cloud.google.com/marketplace/details/netapp-cloudmanager/cloud-manager?supportedpurview=project["이 콘솔 구독을 구독하세요"^] NetApp 백업 및 복구를 활성화하기 전에.  NetApp 백업 및 복구에 대한 청구는 이 구독을 통해 이루어집니다. https://docs.netapp.com/us-en/storage-management-cloud-volumes-ontap/task-deploying-gcp.html["시스템 마법사의 세부 정보 및 자격 증명 페이지에서 구독할 수 있습니다."^] .

NetApp Backup and Recovery BYOL 라이선스의 경우, 라이선스 기간과 용량 동안 서비스를 사용할 수 있도록 하는 NetApp 의 일련 번호가 필요합니다. link:br-start-licensing.html["BYOL 라이선스를 관리하는 방법을 알아보세요"] .

그리고 백업이 저장될 저장 공간에 대한 Google 구독이 필요합니다.



== 콘솔 에이전트를 준비하세요

콘솔 에이전트는 인터넷 접속이 가능한 Google 지역에 설치해야 합니다.

* https://docs.netapp.com/us-en/console-setup-admin/concept-connectors.html["콘솔 에이전트에 대해 알아보세요"^]
* https://docs.netapp.com/us-en/console-setup-admin/task-quick-start-connector-google.html["Google Cloud에 콘솔 에이전트 배포"^]




=== 콘솔 에이전트에 대한 권한을 확인하거나 추가합니다.

NetApp 백업 및 복구의 "검색 및 복원" 기능을 사용하려면 콘솔 에이전트 역할에 대한 특정 권한이 있어야 Google Cloud BigQuery 서비스에 액세스할 수 있습니다.  아래의 권한을 확인하고, 정책을 수정해야 하는 경우 단계에 따라 진행하세요.

.단계
. 에서 https://console.cloud.google.com["구글 클라우드 콘솔"^] *역할* 페이지로 이동합니다.
. 페이지 상단의 드롭다운 목록을 사용하여 편집하려는 역할이 포함된 프로젝트나 조직을 선택합니다.
. 사용자 지정 역할을 선택하세요.
. 역할의 권한을 업데이트하려면 *역할 편집*을 선택하세요.
. *권한 추가*를 선택하여 역할에 다음과 같은 새로운 권한을 추가합니다.
+
[source, json]
----
bigquery.jobs.get
bigquery.jobs.list
bigquery.jobs.listAll
bigquery.datasets.create
bigquery.datasets.get
bigquery.jobs.create
bigquery.tables.get
bigquery.tables.getData
bigquery.tables.list
bigquery.tables.create
----
. 편집한 역할을 저장하려면 *업데이트*를 선택하세요.




=== 고객 관리 암호화 키(CMEK) 사용에 필요한 정보

기본 Google 관리 암호화 키 대신 고객이 관리하는 키를 사용하여 데이터를 암호화할 수 있습니다.  지역 간 키와 프로젝트 간 키가 모두 지원되므로 CMEK 키의 프로젝트와 다른 버킷의 프로젝트를 선택할 수 있습니다.  고객이 직접 관리하는 키를 사용하려는 경우:

* 활성화 마법사에 이 정보를 추가하려면 키 링과 키 이름이 필요합니다. https://cloud.google.com/kms/docs/cmek["고객 관리 암호화 키에 대해 자세히 알아보세요"^] .
* 콘솔 에이전트 역할에 다음과 같은 필수 권한이 포함되어 있는지 확인해야 합니다.


[source, json]
----
cloudkms.cryptoKeys.get
cloudkms.cryptoKeys.getIamPolicy
cloudkms.cryptoKeys.list
cloudkms.cryptoKeys.setIamPolicy
cloudkms.keyRings.get
cloudkms.keyRings.getIamPolicy
cloudkms.keyRings.list
cloudkms.keyRings.setIamPolicy
----
* 프로젝트에서 Google "Cloud Key Management Service(KMS)" API가 활성화되어 있는지 확인해야 합니다. 를 참조하십시오 https://cloud.google.com/apis/docs/getting-started#enabling_apis["Google Cloud 문서: API 활성화"^] 자세한 내용은.


*CMEK 고려 사항:*

* HSM(하드웨어 지원)과 소프트웨어 생성 키가 모두 지원됩니다.
* 새로 생성되었거나 가져온 Cloud KMS 키가 모두 지원됩니다.
* 지역 키만 지원되고, 글로벌 키는 지원되지 않습니다.
* 현재는 "대칭 암호화/복호화" 목적만 지원됩니다.
* 스토리지 계정과 연결된 서비스 에이전트에는 NetApp Backup and Recovery에서 "CryptoKey 암호화/복호화(roles/cloudkms.cryptoKeyEncrypterDecrypter)" IAM 역할이 할당됩니다.




=== 나만의 버킷을 만들어보세요

기본적으로 서비스는 사용자를 위해 버킷을 생성합니다.  자신의 버킷을 사용하려면 백업 활성화 마법사를 시작하기 전에 버킷을 만든 다음 마법사에서 해당 버킷을 선택하면 됩니다.

link:prev-ontap-protect-journey.html["나만의 버킷을 만드는 방법에 대해 자세히 알아보세요"] .



== 볼륨 복제를 위한 ONTAP 네트워킹 요구 사항 확인

NetApp Backup and Recovery를 사용하여 보조 ONTAP 시스템에 복제된 볼륨을 생성하려는 경우 소스 및 대상 시스템이 다음 네트워킹 요구 사항을 충족하는지 확인하세요.



==== 온프레미스 ONTAP 네트워킹 요구 사항

* 클러스터가 사내에 있는 경우 회사 네트워크에서 클라우드 공급자의 가상 네트워크로 연결되어야 합니다.  이는 일반적으로 VPN 연결입니다.
* ONTAP 클러스터는 추가적인 서브넷, 포트, 방화벽 및 클러스터 요구 사항을 충족해야 합니다.
+
Cloud Volumes ONTAP 또는 온프레미스 시스템에 복제할 수 있으므로 온프레미스 ONTAP 시스템에 대한 피어링 요구 사항을 검토하세요. https://docs.netapp.com/us-en/ontap-sm-classic/peering/reference_prerequisites_for_cluster_peering.html["ONTAP 설명서에서 클러스터 피어링에 대한 필수 구성 요소 보기"^] .





==== Cloud Volumes ONTAP 네트워킹 요구 사항

* 인스턴스의 보안 그룹에는 필수 인바운드 및 아웃바운드 규칙이 포함되어야 합니다. 구체적으로는 ICMP 및 포트 11104와 11105에 대한 규칙이 포함됩니다.  이러한 규칙은 미리 정의된 보안 그룹에 포함됩니다.


* 서로 다른 서브넷에 있는 두 개의 Cloud Volumes ONTAP 시스템 간에 데이터를 복제하려면 서브넷을 함께 라우팅해야 합니다(이는 기본 설정입니다).




== Cloud Volumes ONTAP 에서 NetApp 백업 및 복구 활성화

NetApp 백업 및 복구를 활성화하는 단계는 기존 Cloud Volumes ONTAP 시스템이 있는지 아니면 새 시스템이 있는지에 따라 약간 다릅니다.

*새 시스템에서 NetApp 백업 및 복구 활성화*

시스템 마법사를 완료하여 새로운 Cloud Volumes ONTAP 시스템을 만들면 NetApp 백업 및 복구를 활성화할 수 있습니다.

서비스 계정이 이미 구성되어 있어야 합니다.  Cloud Volumes ONTAP 시스템을 생성할 때 서비스 계정을 선택하지 않으면 시스템을 끄고 GCP 콘솔에서 Cloud Volumes ONTAP 에 서비스 계정을 추가해야 합니다.

보다 https://docs.netapp.com/us-en/storage-management-cloud-volumes-ontap/task-deploying-gcp.html["GCP에서 Cloud Volumes ONTAP 출시"^] Cloud Volumes ONTAP 시스템을 만드는 데 필요한 요구 사항과 세부 정보를 확인하세요.

.단계
. 콘솔의 *시스템* 페이지에서 *시스템 추가*를 선택하고, 클라우드 공급자를 선택한 다음 *새로 추가*를 선택합니다.  * Cloud Volumes ONTAP 만들기*를 선택합니다.
. *위치 선택*: *Google Cloud Platform*을 선택하세요.
. *유형 선택*: * Cloud Volumes ONTAP*(단일 노드 또는 고가용성)을 선택합니다.
. *세부 정보 및 자격 증명*: 다음 정보를 입력하세요.
+
.. *프로젝트 편집*을 클릭하고, 사용하려는 프로젝트가 기본 프로젝트(콘솔 에이전트가 있는 프로젝트)와 다른 경우 새 프로젝트를 선택합니다.
.. 클러스터 이름을 지정합니다.
.. *서비스 계정* 스위치를 활성화하고 미리 정의된 스토리지 관리자 역할이 있는 서비스 계정을 선택합니다.  이는 백업과 계층화를 활성화하는 데 필요합니다.
.. 자격 증명을 지정하세요.
+
GCP Marketplace 구독이 활성화되어 있는지 확인하세요.



. *서비스*: NetApp 백업 및 복구를 활성화한 상태로 두고 *계속*을 클릭합니다.
. 시스템을 배포하려면 마법사의 페이지를 완료하세요. https://docs.netapp.com/us-en/storage-management-cloud-volumes-ontap/task-deploying-gcp.html["GCP에서 Cloud Volumes ONTAP 출시"^] .


.결과
시스템에서 NetApp 백업 및 복구가 활성화되어 있습니다.  이러한 Cloud Volumes ONTAP 시스템에서 볼륨을 생성한 후 NetApp Backup and Recovery를 실행하세요.link:prev-ontap-backup-manage.html["보호하려는 각 볼륨에서 백업을 활성화합니다."] .

*기존 시스템에서 NetApp 백업 및 복구 활성화*

언제든지 시스템에서 직접 NetApp 백업 및 복구를 활성화할 수 있습니다.

.단계
. 콘솔의 *시스템* 페이지에서 시스템을 선택하고 오른쪽 패널의 백업 및 복구 옆에 있는 *활성화*를 선택합니다.
+
백업을 위한 Google Cloud Storage 대상이 콘솔의 시스템 페이지에 시스템으로 존재하는 경우, 클러스터를 Google Cloud Storage 시스템으로 끌어서 놓으면 설정 마법사가 시작됩니다.





== Google Cloud Storage를 백업 대상으로 준비하세요

Google Cloud Storage를 백업 대상으로 준비하려면 다음 단계를 따르세요.

* 권한을 설정합니다.
* (선택 사항) 나만의 버킷을 만드세요.  (원하시면 서비스에서 버킷을 만들어드립니다.)
* (선택 사항) 데이터 암호화를 위한 고객 관리 키 설정




=== 권한 설정

사용자 지정 역할을 사용하여 특정 권한이 있는 서비스 계정에 대한 저장소 액세스 키를 제공해야 합니다.  서비스 계정을 사용하면 NetApp Backup and Recovery에서 백업을 저장하는 데 사용되는 Cloud Storage 버킷을 인증하고 액세스할 수 있습니다. Google Cloud Storage에서 누가 요청하는지 알 수 있도록 키가 필요합니다.

.단계
. 에서 https://console.cloud.google.com["구글 클라우드 콘솔"^] *역할* 페이지로 이동합니다.
. https://cloud.google.com/iam/docs/creating-custom-roles#creating_a_custom_role["새로운 역할 만들기"^]다음 권한이 필요합니다.
+
[source, json]
----
storage.buckets.create
storage.buckets.delete
storage.buckets.get
storage.buckets.list
storage.buckets.update
storage.buckets.getIamPolicy
storage.multipartUploads.create
storage.objects.create
storage.objects.delete
storage.objects.get
storage.objects.list
storage.objects.update
----
. Google Cloud 콘솔에서 https://console.cloud.google.com/iam-admin/serviceaccounts["서비스 계정 페이지로 이동"^] .
. 클라우드 프로젝트를 선택하세요.
. *서비스 계정 만들기*를 선택하고 필요한 정보를 제공합니다.
+
.. *서비스 계정 세부 정보*: 이름과 설명을 입력하세요.
.. *이 서비스 계정에 프로젝트에 대한 액세스 권한 부여*: 방금 만든 사용자 지정 역할을 선택합니다.
.. *완료*를 선택하세요.


. 로 가다 https://console.cloud.google.com/storage/settings["GCP 스토리지 설정"^] 서비스 계정에 대한 액세스 키를 생성합니다.
+
.. 프로젝트를 선택하고 *상호운용성*을 선택하세요. 아직 선택하지 않았다면 *상호 운용성 액세스 활성화*를 선택하세요.
.. *서비스 계정용 액세스 키*에서 *서비스 계정용 키 만들기*를 선택하고 방금 만든 서비스 계정을 선택한 다음 *키 만들기*를 클릭합니다.
+
나중에 백업 서비스를 구성할 때 NetApp Backup and Recovery에 키를 입력해야 합니다.







=== 나만의 버킷을 만들어보세요

기본적으로 서비스는 사용자를 위해 버킷을 생성합니다.  또는, 사용자 고유의 버킷을 사용하려면 백업 활성화 마법사를 시작하기 전에 버킷을 만든 다음 마법사에서 해당 버킷을 선택하면 됩니다.

link:prev-ontap-protect-journey.html["나만의 버킷을 만드는 방법에 대해 자세히 알아보세요"] .



=== 데이터 암호화를 위한 고객 관리 암호화 키(CMEK) 설정

기본 Google 관리 암호화 키 대신 고객이 관리하는 키를 사용하여 데이터를 암호화할 수 있습니다.  지역 간 키와 프로젝트 간 키가 모두 지원되므로 CMEK 키의 프로젝트와 다른 버킷의 프로젝트를 선택할 수 있습니다.

고객이 직접 관리하는 키를 사용하려는 경우:

* 활성화 마법사에 이 정보를 추가하려면 키 링과 키 이름이 필요합니다. https://cloud.google.com/kms/docs/cmek["고객 관리 암호화 키에 대해 자세히 알아보세요"^] .
* 콘솔 에이전트 역할에 다음과 같은 필수 권한이 포함되어 있는지 확인해야 합니다.
+
[source, json]
----
cloudkms.cryptoKeys.get
cloudkms.cryptoKeys.getIamPolicy
cloudkms.cryptoKeys.list
cloudkms.cryptoKeys.setIamPolicy
cloudkms.keyRings.get
cloudkms.keyRings.getIamPolicy
cloudkms.keyRings.list
cloudkms.keyRings.setIamPolicy
----
* 프로젝트에서 Google "Cloud Key Management Service(KMS)" API가 활성화되어 있는지 확인해야 합니다. 를 참조하십시오 https://cloud.google.com/apis/docs/getting-started#enabling_apis["Google Cloud 문서: API 활성화"^] 자세한 내용은.


*CMEK 고려 사항:*

* HSM(하드웨어 지원)과 소프트웨어 생성 키가 모두 지원됩니다.
* 새로 생성되었거나 가져온 Cloud KMS 키가 모두 지원됩니다.
* 지역 키만 지원되고 글로벌 키는 지원되지 않습니다.
* 현재는 "대칭 암호화/복호화" 목적만 지원됩니다.
* 스토리지 계정과 연결된 서비스 에이전트에는 NetApp Backup and Recovery에서 "CryptoKey 암호화/복호화(roles/cloudkms.cryptoKeyEncrypterDecrypter)" IAM 역할이 할당됩니다.




== ONTAP 볼륨에서 백업 활성화

언제든지 온프레미스 시스템에서 직접 백업을 활성화하세요.

마법사가 다음의 주요 단계를 안내합니다.

* <<백업할 볼륨을 선택하세요>>
* <<백업 전략 정의>>
* <<선택 사항을 검토하세요>>


당신도 할 수 있습니다<<API 명령 표시>> 검토 단계에서 코드를 복사하여 향후 시스템에 대한 백업 활성화를 자동화할 수 있습니다.



=== 마법사 시작

.단계
. 다음 방법 중 하나를 사용하여 백업 및 복구 활성화 마법사에 액세스하세요.
+
** 콘솔의 *시스템* 페이지에서 시스템을 선택하고 오른쪽 패널의 백업 및 복구 옆에 있는 *활성화 > 백업 볼륨*을 선택합니다.
+
백업을 위한 GCP 대상이 콘솔의 시스템 페이지에 시스템으로 존재하는 경우 ONTAP 클러스터를 GCP 개체 스토리지로 끌어다 놓을 수 있습니다.

** 백업 및 복구 막대에서 *볼륨*을 선택합니다.  볼륨 탭에서 *작업*을 선택하세요.image:icon-action.png["작업 아이콘"] 아이콘을 클릭하고 단일 볼륨(이미 복제나 개체 스토리지 백업이 활성화되지 않은 볼륨)에 대해 *백업 활성화*를 선택합니다.


+
마법사의 소개 페이지에는 로컬 스냅샷, 복제, 백업을 포함한 보호 옵션이 표시됩니다.  이 단계에서 두 번째 옵션을 선택한 경우, 하나의 볼륨이 선택된 상태로 백업 전략 정의 페이지가 나타납니다.

. 다음 옵션을 계속 진행하세요.
+
** 이미 콘솔 에이전트가 있다면 준비가 완료된 것입니다.  *다음*을 선택하세요.
** 아직 콘솔 에이전트가 없으면 *콘솔 에이전트 추가* 옵션이 나타납니다. <<콘솔 에이전트를 준비하세요>> .






=== 백업할 볼륨을 선택하세요

보호할 볼륨을 선택하세요.  보호된 볼륨은 다음 중 하나 이상을 갖춘 볼륨입니다. 스냅샷 정책, 복제 정책, 개체 정책으로의 백업.

FlexVol 또는 FlexGroup 볼륨을 보호하도록 선택할 수 있습니다. 그러나 시스템 백업을 활성화할 때 이러한 볼륨을 혼합하여 선택할 수는 없습니다.  방법을 확인하세요link:prev-ontap-backup-manage.html["시스템의 추가 볼륨에 대한 백업을 활성화합니다."] (FlexVol 또는 FlexGroup) 초기 볼륨에 대한 백업을 구성한 후.

[NOTE]
====
* 한 번에 하나의 FlexGroup 볼륨에서만 백업을 활성화할 수 있습니다.
* 선택한 볼륨에는 동일한 SnapLock 설정이 있어야 합니다.  모든 볼륨에는 SnapLock Enterprise 활성화되어 있어야 하거나 SnapLock 비활성화되어 있어야 합니다.


====
.단계
선택한 볼륨에 이미 스냅샷이나 복제 정책이 적용된 경우 나중에 선택하는 정책이 기존 정책을 덮어씁니다.

. 볼륨 선택 페이지에서 보호하려는 볼륨을 선택합니다.
+
** 선택적으로, 특정 볼륨 유형, 스타일 등을 갖춘 볼륨만 표시하도록 행을 필터링하여 선택을 더 쉽게 할 수 있습니다.
** 첫 번째 볼륨을 선택한 후에는 모든 FlexVol 볼륨을 선택할 수 있습니다(FlexGroup 볼륨은 한 번에 하나씩만 선택할 수 있습니다).  기존의 모든 FlexVol 볼륨을 백업하려면 먼저 볼륨 하나를 선택한 다음 제목 행의 상자를 선택합니다.
** 개별 볼륨을 백업하려면 각 볼륨의 상자를 선택하세요.


. *다음*을 선택하세요.




=== 백업 전략 정의

백업 전략을 정의하려면 다음 옵션을 설정해야 합니다.

* 로컬 스냅샷, 복제 및 개체 스토리지 백업 등 백업 옵션 중 하나 또는 전부를 원하는지 여부
* 아키텍처
* 로컬 스냅샷 정책
* 복제 대상 및 정책
+

NOTE: 선택한 볼륨에 이 단계에서 선택한 정책과 다른 스냅샷 및 복제 정책이 있는 경우 기존 정책이 덮어쓰여집니다.

* 개체 스토리지 정보(공급자, 암호화, 네트워킹, 백업 정책 및 내보내기 옵션)에 대한 백업입니다.


.단계
. 백업 전략 정의 페이지에서 다음 중 하나 또는 모두를 선택하세요.  기본적으로 세 가지 모두 선택되어 있습니다.
+
** *로컬 스냅샷*: 개체 스토리지에 복제나 백업을 수행하는 경우 로컬 스냅샷을 만들어야 합니다.
** *복제*: 다른 ONTAP 스토리지 시스템에 복제된 볼륨을 생성합니다.
** *백업*: 볼륨을 개체 스토리지에 백업합니다.


. *아키텍처*: 복제 및 백업을 선택한 경우 다음 정보 흐름 중 하나를 선택하세요.
+
** *계단식*: 정보는 기본 스토리지 시스템에서 보조 스토리지로, 보조 스토리지에서 개체 스토리지로 흐릅니다.
** *팬아웃*: 정보는 기본 스토리지 시스템에서 보조 스토리지로, 기본 스토리지에서 개체 스토리지로 흐릅니다.
+
이러한 아키텍처에 대한 자세한 내용은 다음을 참조하세요.link:prev-ontap-protect-journey.html["보호 여정을 계획하세요"] .



. *로컬 스냅샷*: 기존 스냅샷 정책을 선택하거나 새로 만듭니다.
+

TIP: 백업을 활성화하기 전에 사용자 정의 정책을 생성하려면 다음을 참조하세요.link:br-use-policies-create.html["정책 만들기"] .

+
정책을 만들려면 *새 정책 만들기*를 선택하고 다음을 수행하세요.

+
** 정책의 이름을 입력하세요.
** 일반적으로 서로 다른 빈도로 최대 5개의 일정을 선택하세요.
** 백업-객체 정책의 경우 Datalock 및 랜섬웨어 복원력을 구성합니다.  Datalock 및 Ransomware Resilience에 대한 자세한 내용은 다음을 참조하세요.link:prev-ontap-policy-object-options.html["개체 백업 정책 설정"] .
** *만들기*를 선택하세요.


. *복제*: 다음 옵션을 설정합니다.
+
** *복제 대상*: 대상 시스템과 SVM을 선택합니다.  선택적으로 복제된 볼륨 이름에 추가될 대상 집계 또는 집계와 접두사 또는 접미사를 선택합니다.
** *복제 정책*: 기존 복제 정책을 선택하거나 새로 만듭니다.
+

TIP: 복제를 활성화하기 전에 사용자 지정 정책을 생성하려면 다음을 참조하세요.link:br-use-policies-create.html["정책 만들기"] .

+
정책을 만들려면 *새 정책 만들기*를 선택하고 다음을 수행하세요.

+
*** 정책의 이름을 입력하세요.
*** 일반적으로 서로 다른 빈도로 최대 5개의 일정을 선택하세요.
*** *만들기*를 선택하세요.




. *개체로 백업*: *백업*을 선택한 경우 다음 옵션을 설정합니다.
+
** *공급자*: *Google Cloud*를 선택하세요.
** *공급자 설정*: 공급자 세부 정보와 백업이 저장될 지역을 입력하세요.
+
새로운 버킷을 만들거나 기존 버킷을 선택하세요.

** *암호화 키*: 새 Google 버킷을 만든 경우 공급업체에서 제공한 암호화 키 정보를 입력하세요.  데이터 암호화를 관리하기 위해 기본 Google Cloud 암호화 키를 사용할지, 아니면 Google 계정에서 고객이 관리하는 키를 선택할지 선택하세요.
+
고객이 직접 관리하는 키를 사용하기로 선택한 경우 키 보관소와 키 정보를 입력하세요.



+

NOTE: 기존 Google Cloud 버킷을 선택한 경우 암호화 정보가 이미 제공되므로 지금 입력할 필요가 없습니다.

+
** *백업 정책*: 기존의 백업-객체 스토리지 정책을 선택하거나 새로 만듭니다.
+

TIP: 백업을 활성화하기 전에 사용자 정의 정책을 생성하려면 다음을 참조하세요.link:br-use-policies-create.html["정책 만들기"] .

+
정책을 만들려면 *새 정책 만들기*를 선택하고 다음을 수행하세요.

+
*** 정책의 이름을 입력하세요.
*** 일반적으로 서로 다른 빈도로 최대 5개의 일정을 선택하세요.
*** *만들기*를 선택하세요.


** *기존 스냅샷 복사본을 백업 복사본으로 개체 스토리지로 내보내기*: 이 시스템에 방금 선택한 백업 일정 레이블(예: 매일, 매주 등)과 일치하는 볼륨의 로컬 스냅샷 복사본이 있는 경우 이 추가 메시지가 표시됩니다.  볼륨에 대한 가장 완벽한 보호를 보장하기 위해 모든 이전 스냅샷을 백업 파일로 개체 스토리지에 복사하려면 이 상자를 선택하세요.


. *다음*을 선택하세요.




=== 선택 사항을 검토하세요

이는 귀하의 선택 사항을 검토하고 필요한 경우 조정할 수 있는 기회입니다.

.단계
. 검토 페이지에서 선택 사항을 검토하세요.
. 선택적으로 *스냅샷 정책 레이블을 복제 및 백업 정책 레이블과 자동으로 동기화* 확인란을 선택합니다.  이렇게 하면 복제 및 백업 정책의 레이블과 일치하는 레이블이 있는 스냅샷이 생성됩니다.
. *백업 활성화*를 선택하세요.


.결과
NetApp Backup and Recovery는 볼륨의 초기 백업을 시작합니다.  복제된 볼륨과 백업 파일의 기준 전송에는 기본 스토리지 시스템 데이터의 전체 사본이 포함됩니다.  이후 전송에는 스냅샷 복사본에 포함된 기본 스토리지 시스템 데이터의 차등 복사본이 포함됩니다.

대상 클러스터에 복제된 볼륨이 생성되어 기본 스토리지 시스템 볼륨과 동기화됩니다.

입력한 Google 액세스 키와 비밀 키로 지정된 서비스 계정에 Google Cloud Storage 버킷이 생성되고, 백업 파일이 해당 버킷에 저장됩니다.

백업은 기본적으로 _Standard_ 스토리지 클래스와 연결됩니다.  비용이 저렴한 _Nearline_, _Coldline_ 또는 _Archive_ 스토리지 클래스를 사용할 수 있습니다.  하지만 NetApp 백업 및 복구 UI가 아닌 Google을 통해 스토리지 클래스를 구성합니다.  Google 주제를 참조하세요 https://cloud.google.com/storage/docs/changing-default-storage-class["버킷의 기본 스토리지 클래스 변경"^] 자세한 내용은.

볼륨 백업 대시보드가 표시되어 백업 상태를 모니터링할 수 있습니다.

다음을 사용하여 백업 및 복원 작업의 상태를 모니터링할 수도 있습니다.link:br-use-monitor-tasks.html["작업 모니터링 페이지"] .



=== API 명령 표시

백업 및 복구 활성화 마법사에서 사용되는 API 명령을 표시하고 선택적으로 복사할 수 있습니다.  향후 시스템에서 백업 활성화를 자동화하려면 이 작업을 수행하는 것이 좋습니다.

.단계
. 백업 및 복구 활성화 마법사에서 *API 요청 보기*를 선택합니다.
. 명령을 클립보드에 복사하려면 *복사* 아이콘을 선택하세요.




== 다음은 무엇인가요?

* 당신은 할 수 있어요 link:prev-ontap-backup-manage.html["백업 파일과 백업 정책을 관리하세요"]. 여기에는 백업 시작 및 중지, 백업 삭제, 백업 일정 추가 및 변경 등이 포함됩니다.
* 당신은 할 수 있어요 link:prev-ontap-policy-object-advanced-settings.html["클러스터 수준 백업 설정 관리"]. 여기에는 ONTAP 클라우드 스토리지에 액세스하는 데 사용하는 스토리지 키 변경, 개체 스토리지에 백업을 업로드하는 데 사용할 수 있는 네트워크 대역폭 변경, 향후 볼륨에 대한 자동 백업 설정 변경 등이 포함됩니다.
* 당신도 할 수 있습니다link:prev-ontap-restore.html["백업 파일에서 볼륨, 폴더 또는 개별 파일 복원"] AWS의 Cloud Volumes ONTAP 시스템이나 온프레미스 ONTAP 시스템으로.

