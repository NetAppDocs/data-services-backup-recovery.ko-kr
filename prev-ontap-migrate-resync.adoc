---
sidebar: sidebar 
permalink: prev-ontap-migrate-resync.html 
keywords: backing up, back up, backup, backup application data, Amazon Web services, AWS, NetApp Backup and Recovery, Oracle database, Microsoft SQL Server database, SAP HANA database, migrate volumes, SnapMirror to Cloud Resync, ONTAP, NetApp, NetApp ONTAP, NetApp Cloud Volumes ONTAP, NetApp Cloud Volumes Service, FlexVols, FlexGroups 
summary: NetApp Backup and Recovery의 SnapMirror to Cloud Resync 기능은 NetApp 환경에서 볼륨 마이그레이션 중에 데이터 보호와 연속성을 간소화합니다. 
---
= NetApp Backup and Recovery에서 SnapMirror 사용하여 볼륨을 Cloud Resync로 마이그레이션
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Backup and Recovery의 SnapMirror to Cloud Resync 기능은 NetApp 환경에서 볼륨 마이그레이션 중에 데이터 보호와 연속성을 간소화합니다.  SnapMirror Logical Replication(LRSE)을 사용하여 볼륨을 온프레미스 NetApp 배포에서 다른 배포로 또는 Cloud Volumes ONTAP 이나 Cloud Volumes Service 와 같은 클라우드 기반 솔루션으로 마이그레이션하는 경우 SnapMirror to Cloud Resync를 통해 기존 클라우드 백업이 손상되지 않고 작동 상태를 유지하도록 보장합니다.

이 기능을 사용하면 시간이 많이 걸리고 리소스가 많이 필요한 재기준화 작업이 필요 없으므로 마이그레이션 후에도 백업 작업을 계속할 수 있습니다.  이 기능은 FlexVol과 FlexGroup을 모두 지원하여 워크로드 마이그레이션 시나리오에서 유용하며 ONTAP 버전 9.16.1부터 사용할 수 있습니다.


NOTE: 이 기능은 2025년 5월에 출시된 NetApp Backup and Recovery 버전 4.0.3부터 사용할 수 있습니다.

SnapMirror to Cloud Resync는 여러 환경 간에 백업 연속성을 유지함으로써 운영 효율성을 높이고 하이브리드 및 멀티 클라우드 데이터 관리의 복잡성을 줄여줍니다.

[]
====
*참고* NetApp 백업 및 복구 워크로드로 전환하려면 다음을 참조하세요.link:br-start-switch-ui.html["다양한 NetApp 백업 및 복구 워크로드로 전환"] .

====
.시작하기 전에
다음 전제 조건이 충족되었는지 확인하세요.

* 대상 ONTAP 클러스터는 ONTAP 버전 9.16.1 이상을 실행해야 합니다.
* 이전 소스 ONTAP 클러스터는 NetApp Backup and Recovery를 사용하여 보호해야 합니다.
* SnapMirror to Cloud Resync 기능은 2025년 5월에 출시된 NetApp Backup and Recovery 버전 4.0.3부터 사용할 수 있습니다.
* 개체 저장소의 최신 백업은 이전 소스, 새 소스 및 개체 저장소에 대한 공통 스냅샷이어야 합니다. 공통 스냅샷은 개체 저장소에 백업된 최신 스냅샷보다 오래될 수 없습니다.
* 이전 ONTAP 에서 사용되었던 스냅샷 정책과 SnapMirror 정책은 모두 재동기화 작업을 시작하기 전에 새 ONTAP 클러스터에서 생성되어야 합니다. 재동기화 프로세스에서 정책을 사용할 경우 해당 정책도 만들어야 합니다. 재동기화 작업으로 정책이 생성되지 않습니다.
* 마이그레이션 볼륨 SnapMirror 관계에 적용되는 SnapMirror 정책에 클라우드 관계에 사용되는 것과 동일한 레이블이 포함되어 있는지 확인하세요. 문제를 방지하려면 볼륨과 모든 스냅샷의 정확한 미러를 관리하는 정책을 사용하세요.



NOTE: SVM-Migrate, SVM-DR 또는 Head Swap 방법을 사용하여 마이그레이션한 후 SnapMirror 에서 Cloud Resync로 다시 동기화하는 기능은 현재 지원되지 않습니다.



== NetApp 백업 및 복구 SnapMirror to Cloud Resync 작동 방식

기술적 업데이트를 완료하거나 한 ONTAP 클러스터에서 다른 ONTAP 클러스터로 볼륨을 마이그레이션하는 경우 백업이 중단 없이 계속 작동하는 것이 중요합니다.  NetApp Backup and Recovery SnapMirror to Cloud Resync는 볼륨 마이그레이션 후에도 클라우드 백업이 일관성을 유지하도록 보장하여 이를 지원합니다.

예를 들면 다음과 같습니다.

Vol1a라는 온프레미스 볼륨이 있다고 가정해 보겠습니다.  이 볼륨에는 S1, S2, S3의 세 개의 스냅샷이 있습니다.  이러한 스냅샷은 복원 지점과 같습니다.  Vol1은 이미 SnapMirror to Cloud(SM-C)를 사용하여 클라우드 객체 저장소 엔드포인트에 백업되고 있습니다.  하지만 지금까지 S1과 S2만 개체 저장소에 백업되었습니다.

이제 Vol1을 다른 ONTAP 클러스터로 마이그레이션하려고 합니다.  이를 위해 Vol1b라는 새로운 클라우드 볼륨에 대한 SnapMirror 논리적 복제(LRSE) 관계를 생성합니다.  이렇게 하면 세 개의 스냅샷(S1, S2, S3)이 모두 Vol1a에서 Vol1b로 전송됩니다.

마이그레이션이 완료되면 다음과 같은 설정이 적용됩니다.

* 원래 SM-C 관계(Vol1a → Object store)가 삭제됩니다.
* LRSE 관계(Vol1a → Vol1b)도 삭제됩니다.
* Vol1b가 이제 활성 볼륨이 되었습니다.


이 시점에서 Vol1b를 동일한 클라우드 엔드포인트로 계속 백업하려고 합니다.  하지만 처음부터 전체 백업을 시작하는 대신(시간과 리소스가 필요함) SnapMirror 사용하여 Cloud Resync를 수행합니다.

재동기화는 다음과 같이 작동합니다.

* 시스템은 Vol1a와 Object store 간의 공통 스냅샷을 확인합니다.  이 경우 둘 다 S2를 갖습니다.
* 이러한 공유 스냅샷으로 인해 시스템은 S2와 S3 간의 증분 변경 사항만 전송하면 됩니다.


즉, S2 이후에 추가된 새 데이터만 개체 저장소로 전송되고 전체 볼륨은 전송되지 않습니다.

이 프로세스를 통해 이미 백업된 데이터를 다시 전송하는 것을 방지하고, 대역폭을 절약하며, 마이그레이션 후에도 백업 체인이 원활하게 이어지도록 보장합니다.

image:diagram-snapmirror-cloud-resync-migration.png["NetApp 백업 및 복구 SnapMirror to Cloud Resync"]



== 시술 노트

* NetApp 백업 및 복구를 사용하여 마이그레이션과 기술 업데이트를 수행하지 않습니다.  이러한 작업은 전문 서비스 팀이나 자격을 갖춘 보관 관리자가 수행해야 합니다.
* NetApp 마이그레이션 팀은 볼륨 마이그레이션을 원활하게 하기 위해 소스 및 대상 ONTAP 클러스터 간의 SnapMirror 관계를 만드는 역할을 담당합니다.
* 기술 업데이트 중 마이그레이션이 SnapMirror 기반 마이그레이션을 기반으로 수행되는지 확인하세요.




== SnapMirror 사용하여 볼륨을 Cloud Resync로 마이그레이션하는 방법

SnapMirror 사용하여 볼륨을 Cloud Resync로 마이그레이션하는 작업에는 다음과 같은 주요 단계가 포함되며, 각 단계에 대한 자세한 내용은 아래에서 설명합니다.

* *마이그레이션 전 체크리스트를 따르세요*: 마이그레이션을 시작하기 전에 NetApp Tech Refresh 팀은 데이터 손실을 방지하고 원활한 마이그레이션 프로세스를 보장하기 위해 다음 전제 조건이 충족되는지 확인합니다.
* *마이그레이션 후 체크리스트를 따르세요*: 마이그레이션 후 NetApp 기술 업데이트 팀은 다음 단계가 완료되어 보호가 확립되고 재동기화를 준비합니다.
* * SnapMirror 에서 클라우드 재동기화 수행*: 마이그레이션 후 NetApp 기술 업데이트 팀은 SnapMirror 에서 클라우드 재동기화 작업을 수행하여 새로 마이그레이션된 볼륨에서 클라우드 백업을 재개합니다.


image:diagram-snapmirror-cloud-resync-migration-steps.png["SnapMirror 사용하여 볼륨을 Cloud Resync로 마이그레이션하는 단계"]



=== 이주 전 체크리스트를 따르세요

마이그레이션을 시작하기 전에 NetApp Tech Refresh 팀은 데이터 손실을 방지하고 원활한 마이그레이션 프로세스를 보장하기 위해 다음과 같은 전제 조건이 충족되는지 확인합니다.

. 마이그레이션할 모든 볼륨이 NetApp Backup and Recovery를 사용하여 보호되는지 확인하세요.
. 볼륨 인스턴스 UUID를 기록합니다.  마이그레이션을 시작하기 전에 모든 볼륨의 인스턴스 UUID를 기록해 두세요.  이러한 식별자는 나중에 매핑 및 재동기화 작업에 매우 중요합니다.
. SnapMirror 관계를 삭제하기 전에 최신 상태를 보존하기 위해 각 볼륨의 최종 스냅샷을 찍습니다.
. SnapMirror 정책을 문서화합니다.  각 볼륨의 관계에 현재 연결된 SnapMirror 정책을 기록합니다.  이 작업은 나중에 SnapMirror 와 Cloud Resync 프로세스 중에 필요합니다.
. 개체 저장소와 SnapMirror Cloud 관계를 삭제합니다.
. 볼륨을 새 대상 ONTAP 클러스터로 마이그레이션하려면 새 ONTAP 클러스터와 표준 SnapMirror 관계를 만듭니다.




=== 이주 후 체크리스트를 따르세요

마이그레이션 후 NetApp 기술 업데이트 팀은 다음 단계가 완료되어 보호가 확립되고 재동기화를 준비합니다.

. 대상 ONTAP 클러스터에 있는 모든 마이그레이션된 볼륨의 새 볼륨 인스턴스 UUID를 기록합니다.
. 이전 ONTAP 클러스터에서 사용 가능했던 모든 필수 SnapMirror 정책이 새 ONTAP 클러스터에서 올바르게 구성되었는지 확인합니다.
. 콘솔의 시스템 페이지에서 새로운 ONTAP 클러스터를 시스템으로 추가합니다.
+

NOTE: 볼륨 ID가 아닌 볼륨 인스턴스 UUID를 사용해야 합니다. 볼륨 인스턴스 UUID는 마이그레이션 전체에서 일관되게 유지되는 고유 식별자인 반면, 볼륨 ID는 마이그레이션 후에 변경될 수 있습니다.





=== SnapMirror 클라우드 재동기화로 수행

마이그레이션 후 NetApp Tech Refresh 팀은 SnapMirror to Cloud Resync 작업을 수행하여 새로 마이그레이션된 볼륨에서 클라우드 백업을 재개합니다.

. 콘솔의 시스템 페이지에서 새로운 ONTAP 클러스터를 시스템으로 추가합니다.
. NetApp 백업 및 복구 볼륨 페이지를 확인하여 이전 소스 시스템 세부 정보를 사용할 수 있는지 확인하세요.
. NetApp 백업 및 복구 볼륨 페이지에서 *백업 설정*을 선택합니다.
+
** 백업 설정 페이지에서 *모두 보기*를 선택합니다.
** _새로운_ 소스 오른쪽에 있는 작업... 메뉴에서 *백업 재동기화*를 선택합니다.


. Resync 시스템 페이지에서 다음을 수행합니다.
+
.. *새로운 소스 시스템*: 볼륨이 마이그레이션된 새로운 ONTAP 클러스터를 입력합니다.
.. *기존 대상 개체 저장소*: 이전 소스 시스템의 백업이 포함된 대상 개체 저장소를 선택합니다.


. *CSV 템플릿 다운로드*를 선택하여 Resync 세부 정보 Excel 시트를 다운로드하세요.  이 시트를 사용하여 마이그레이션할 볼륨의 세부 정보를 입력하세요.  CSV 파일에 다음 세부 정보를 입력하세요.
+
** 소스 클러스터의 이전 볼륨 인스턴스 UUID
** 대상 클러스터의 새 볼륨 인스턴스 UUID
** 새로운 관계에 적용될 SnapMirror 정책입니다.


. *볼륨 매핑 세부 정보 업로드*에서 *업로드*를 선택하여 작성된 CSV 시트를 NetApp 백업 및 복구 UI에 업로드합니다.
+

NOTE: 볼륨 ID가 아닌 볼륨 인스턴스 UUID를 사용해야 합니다. 볼륨 인스턴스 UUID는 마이그레이션 전체에서 일관되게 유지되는 고유 식별자인 반면, 볼륨 ID는 마이그레이션 후에 변경될 수 있습니다.

. 재동기화 작업에 필요한 공급자 및 네트워크 구성 정보를 입력하세요.
. *제출*을 선택하여 검증 과정을 시작하세요.
+
NetApp 백업 및 복구는 재동기화를 위해 선택된 각 볼륨이 최신 스냅샷이고 적어도 하나의 공통 스냅샷이 있는지 확인합니다. 이렇게 하면 볼륨이 SnapMirror to Cloud Resync 작업에 준비됩니다.

. 새로운 소스 볼륨 이름과 각 볼륨의 재동기화 상태를 포함한 검증 결과를 검토합니다.
. 볼륨 적합성을 확인하세요. 시스템은 볼륨이 재동기화에 적합한지 확인합니다. 볼륨이 적합하지 않은 경우 최신 스냅샷이 아니거나 공통 스냅샷을 찾을 수 없음을 의미합니다.
+

IMPORTANT: 볼륨이 SnapMirror to Cloud Resync 작업에 적합한 상태를 유지하도록 하려면 사전 마이그레이션 단계에서 SnapMirror 관계를 삭제하기 전에 각 볼륨의 최종 스냅샷을 찍습니다.  이렇게 하면 최신 데이터 상태가 보존됩니다.

. 재동기화 작업을 시작하려면 *재동기화*를 선택하세요. 시스템은 최신의 공통 스냅샷을 사용하여 증분 변경 사항만 전송하여 백업 연속성을 보장합니다.
. 작업 모니터 페이지에서 재동기화 프로세스를 모니터링합니다.

